<!DOCTYPE html>
<html>
<head>
    <title>EMS Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white p-10">
    <h1 class="text-2xl font-bold text-red-500 border-b border-red-900 pb-4 mb-10">LIVE DISPATCH FEED</h1>
    
    <div id="list">
        <p class="text-slate-600 italic">No incoming signals... keep this tab open.</p>
    </div>

    <script>
        function updateFeed() {
            const raw = localStorage.getItem('FINAL_HACK_DATA');
            if (raw) {
                const sos = JSON.parse(raw);
                const list = document.getElementById('list');
                
                list.innerHTML = `
                    <div class="bg-slate-900 border-l-4 border-red-600 p-6 rounded shadow-xl animate-pulse">
                        <h2 class="text-red-500 font-black text-2xl">ðŸš¨ EMERGENCY DETECTED</h2>
                        <p class="mt-2 text-xl">Patient: <b>${sos.name}</b></p>
                        <p class="text-green-400 font-mono mt-2">Location: ${sos.lat}, ${sos.lon}</p>
                        <p class="text-slate-500 text-xs mt-4">Time Received: ${sos.time}</p>
                        <button onclick="localStorage.clear(); location.reload();" class="mt-4 text-xs text-slate-700 underline">Resolve & Clear</button>
                    </div>
                `;
            }
        }
        // Every 1 second, it checks the "bridge"
        setInterval(updateFeed, 1000);
    </script>
</body>
</html>
